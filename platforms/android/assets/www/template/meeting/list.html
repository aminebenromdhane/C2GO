<ion-view>
    <ion-header-bar class="bar-addicaid" ng-controller="HeaderController as header">
        <div class="buttons">
            <button menu-toggle="left" class="button button-icon"><i class="md-menu white md-lg"></i></button>
        </div>
        <h1 class="title title-left" style="left: 45px !important">Meetings List</h1>
        <div class="buttons">
            <button class="button button-icon" ng-click="header.goTo('meeting.map')"><i class="md md-map white md-lg"></i></button>
            <button class="button button-icon" ng-click="header.goTo('meeting.filterLocation')"><i class="md md-search white md-lg"></i></button>
        </div>
    </ion-header-bar>
    <ion-content class="has-subheader-rel has-header">
        <div class="list list-inset">
            <label class="item item-input">
                <i class="icon ion-search placeholder-icon"></i>
                <input type="text" placeholder="Search by keyword or location" ng-model="list.query" ng-change="list.search()">
            </label>
        </div>

        <div layout="row" layout-align="space-around center" style="margin-bottom: 20px;">
            <div><md-button md-theme="addicaid" ng-class="{'selected': list.sort.nearest}" ng-click="list.changeSort('nearest')" class="md-raised">Nearest</md-button></div>
            <div><md-button md-theme="addicaid" ng-class="{'selected': list.sort.soonest}" ng-click="list.changeSort('soonest')" class="md-raised">Soonest</md-button></div>
            <div><md-button md-theme="addicaid" ng-class="{'selected': list.sort.popular}" ng-click="list.changeSort('popular')" class="md-raised">Most Popular</md-button></div>
        </div>

        <div class="bar bar-subheader rel" ng-hide="list.loading">
            <h2 class="title">{{ list.totalMeetings }} meetings within 30 miles</h2>
        </div>


        <ion-list ng-hide="list.loading">
            <ion-item ng-repeat="meeting in list.meetings"  ui-sref="meeting.detail({ meetingId: meeting.meetingId })" class="list-entry">
                <div layout="row">
                    <div flex="80" class="inner">
                        <h4>{{ meeting.title }}</h4>
                        <span class="fellowship">
                            {{ meeting.fellowship.name }}
                        <br/>
                        </span>
                        <span ng-if="meeting.address" class="address"><i class="tooltip md md-place blue md-lg"></i>
                            {{ meeting.address }}, {{ meeting.state }} {{ meeting.zip }}
                       
                        </span>
                        <div class="day-time">
                        <span class="tool inline day">
                        <i class="md md-today blue md-lg"></i>
                            {{ meeting.day }}
                        </span>
                        <span class="tool inline time"><i class="md md-access-time blue md-lg"></i>
                            {{ meeting.time | date:'shortTime' }}
                        </span>
                        </div>
                    </div>
                    <div flex style="text-align: center;">
                        <md-button class="md-primary md-fab directions white" style="width: 40px;height: 40px;">
                            <i class="md md-directions blue md-lg"></i>
                        </md-button>
                        <p class="distance-amount">
                            {{ meeting.distance | distance }}
                        </p>
                    </div>
                </div>
            </ion-item>

        </ion-list>
        <ion-infinite-scroll
                on-infinite="list.loadMore()"
                icon="ion-loading-c"
                ng-if="list.canLoadMore()">
        </ion-infinite-scroll>
        <div ng-show="list.loading" style="text-align: center;padding-top: 20px;">
            <i style="font-size: 30px" class="ion-loading-c"></i>
        </div>
    </ion-content>
</ion-view>
